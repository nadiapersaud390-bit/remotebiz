<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Performance Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:ital,wght@1,700&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #0b0e14; 
            --cyan: #45f3ff; 
            --card: #1c1f26; 
            --text: #fff; 
            --orange: #ff8c00; 
            --gold: #ffd700;
        }
        
        body { 
            background: var(--bg); 
            color: var(--text); 
            font-family: 'Roboto', sans-serif; 
            padding: 10px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            margin: 0; 
        }
        
        .container { 
            width: 95%; 
            max-width: 1100px; 
            border: 1px solid #333; 
            padding: 20px; 
            margin-bottom: 20px; 
            background: rgba(20, 20, 20, 0.95); 
            border-radius: 12px;
        }
        
        .header { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 10px; 
            margin-bottom: 30px; 
        }
        
        .header h1 { 
            font-family: 'Dancing Script', cursive; 
            color: var(--cyan); 
            font-size: clamp(2rem, 8vw, 4rem); 
            margin: 0; 
            text-align: center; 
        }
        
        .headset-icon { 
            width: clamp(40px, 10vw, 100px); 
            filter: drop-shadow(0 0 10px var(--cyan)); 
        }
        
        /* Layout logic */
        .dash-layout { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
        }

        .rank-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
        }

        /* Responsive Fixes */
        @media (max-width: 850px) {
            .dash-layout, .rank-grid {
                grid-template-columns: 1fr;
            }
            .header { flex-wrap: wrap; }
            .circle { width: 130px; height: 130px; }
        }

        .levels-flex { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 15px; 
            justify-content: center; 
        }
        
        .circle { 
            border: 3px solid var(--cyan); 
            border-radius: 50%; 
            width: 140px; 
            height: 140px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            background-color: #fff; 
            position: relative; 
            box-shadow: 0 0 15px rgba(69,243,255,0.3); 
            overflow: hidden; 
        }

        .circle::before { 
            content: ""; 
            position: absolute; 
            top: 0; height: 40px; width: 100%;
            background: #222; 
            z-index: 1; 
        }

        .level-title-box { 
            position: absolute; top: 5px; z-index: 2; 
            color: #fff; text-align: center; width: 100%; 
        }
        
        .lvl-num { font-size: 9px; font-weight: bold; display: block;}
        .lvl-name { font-size: 10px; font-weight: 900; display: block;}

        .icon-container { 
            width: 40px; height: 40px; 
            background-size: contain; background-repeat: no-repeat; background-position: center; 
            z-index: 2; margin-top: 45px; 
        }
        
        .leads-label { color: #333; font-weight: bold; font-size: 0.7rem; z-index: 2; }
        
        .circle strong { 
            font-size: 1.2rem; color: var(--cyan); z-index: 2; 
            text-shadow: 1px 1px 1px #000; 
        }
        
        .lvl-5 { border-color: var(--gold); }

        .lvl-1 .icon-container { background-image: url('https://i.postimg.cc/pTPgJVNS/Shield.png'); }
        .lvl-2 .icon-container { background-image: url('https://i.postimg.cc/rmqvNy6J/Sword.png'); }
        .lvl-3 .icon-container { background-image: url('https://i.postimg.cc/XJnTkNMx/Flame.png'); }
        .lvl-4 .icon-container { background-image: url('https://i.postimg.cc/JhNfXDFF/Crown.png'); }
        .lvl-5 .icon-container { background-image: url('https://i.postimg.cc/JnR957w2/Bird.png'); }

        .list { display: flex; flex-direction: column; gap: 8px; }
        .item { 
            background: var(--card); 
            padding: 12px; 
            border-radius: 8px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 1px solid #333; 
        }
        
        .badge-box { 
            display: flex; align-items: center; gap: 5px; 
            background: rgba(255, 140, 0, 0.1); 
            padding: 4px 8px; border-radius: 4px; border: 1px solid var(--orange); 
        }
        
        .level-icon { width: 20px; height: 20px; }
        .badge-text { font-size: 0.7rem; color: var(--orange); font-weight: bold; }
        .score { color: var(--cyan); font-weight: bold; font-size: 1.4rem; }
        
        #live-quote { margin-top: 20px; font-style: italic; color: #888; text-align: center; }

        .refresh-btn {
            background: var(--cyan); color: #000; border: none; padding: 12px 30px;
            font-weight: bold; cursor: pointer; border-radius: 50px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <img src="https://i.postimg.cc/265BRmdB/Headset.png" class="headset-icon">
            <h1>Performance</h1>
            <img src="https://i.postimg.cc/265BRmdB/Headset.png" class="headset-icon" style="transform: scaleX(-1);">
        </div>
        <div class="dash-layout">
            <div class="levels-flex">
                <div class="circle lvl-1"><div class="level-title-box"><span class="lvl-num">Lvl 1</span><span class="lvl-name">Rookie</span></div><div class="icon-container"></div><span class="leads-label">Leads</span><strong>1-3</strong></div>
                <div class="circle lvl-2"><div class="level-title-box"><span class="lvl-num">Lvl 2</span><span class="lvl-name">Pro</span></div><div class="icon-container"></div><span class="leads-label">Leads</span><strong>4-6</strong></div>
                <div class="circle lvl-3"><div class="level-title-box"><span class="lvl-num">Lvl 3</span><span class="lvl-name">Elite</span></div><div class="icon-container"></div><span class="leads-label">Leads</span><strong>7-10</strong></div>
                <div class="circle lvl-5"><div class="level-title-box"><span class="lvl-num">Lvl 5</span><span class="lvl-name">King</span></div><div class="icon-container"></div><span class="leads-label">Leads</span><strong>20+</strong></div>
            </div>
            <div class="list" id="level-list"></div>
        </div>
    </div>

    <div class="container">
        <div class="rank-grid">
            <div class="col"><h3 style="color:var(--cyan)">2PM</h3><div class="list" id="col-2pm"></div></div>
            <div class="col"><h3 style="color:var(--cyan)">5PM</h3><div class="list" id="col-5pm"></div></div>
            <div class="col"><h3 style="color:var(--cyan)">8PM</h3><div class="list" id="col-8pm"></div></div>
        </div>
        <div id="live-quote"></div>
    </div>

    <button class="refresh-btn" onclick="sync()">Refresh Data</button>
    <p id="last-sync" style="font-size: 0.7rem; color: #555; margin-top: 10px;"></p>

    <script>
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSx8VEF3FgnN0v4yP_DaAxbwGRArshNfAGdEh27tStmMtwiYwzK4ZAkTeclpt1aooM77Y7JCsLjptcQ/pub?gid=526432516&single=true&output=csv';
        
        // PASTE YOUR DISCORD WEBHOOK URL HERE
        const webhookUrl = ''; 

        async function notifyMe(action) {
            if(!webhookUrl) return;
            try {
                await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: `ðŸš€ Dashboard ${action}! Time: ${new Date().toLocaleTimeString()}` })
                });
            } catch(e) { console.log("Notify failed"); }
        }

        async function sync() {
            const btn = document.querySelector('.refresh-btn');
            btn.innerText = "Syncing...";
            
            try {
                const res = await fetch(`${sheetUrl}&ts=${new Date().getTime()}`);
                const data = await res.text();
                const rows = data.split('\n').map(r => r.split(','));
                
                // Process Agents
                const agentRows = rows.slice(1, 7); 
                let agents = agentRows.map(cols => ({
                    name: cols[0]?.trim(),
                    v2: parseInt(cols[1]) || 0,
                    v5: parseInt(cols[2]) || 0,
                    v8: parseInt(cols[3]) || 0,
                    max: Math.max(parseInt(cols[1])||0, parseInt(cols[2])||0, parseInt(cols[3])||0)
                })).filter(a => a.name);

                // Update UI (Simplified for briefness)
                let lvH = '';
                agents.sort((a,b) => b.max - a.max).forEach(a => {
                    lvH += `<div class="item"><span>${a.name}</span><div class="badge-box"><span class="badge-text">SCORE: ${a.max}</span></div></div>`;
                });
                document.getElementById('level-list').innerHTML = lvH;

                document.getElementById('last-sync').innerText = "Updated: " + new Date().toLocaleTimeString();
                notifyMe("Opened/Refreshed");
            } catch (e) {
                console.error(e);
            } finally {
                btn.innerText = "Refresh Data";
            }
        }

        window.onload = sync;
    </script>
</body>
</html>
